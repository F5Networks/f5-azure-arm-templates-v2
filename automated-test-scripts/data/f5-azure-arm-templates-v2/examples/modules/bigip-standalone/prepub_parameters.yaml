---
ADMIN USERNAME: dewdrop
SOLUTION TYPE: standard
# must be true when not creating mgmt public IP
CREATE NAT GATEWAY: false
DNSLABEL: <RESOURCE GROUP>
EXTERNAL LOAD BALANCER NAME: None
IMAGE: f5-networks:f5-big-ip-best:f5-big-best-plus-hourly-25mbps-po-f5:17.1.100002
INSTANCE TYPE: Standard_D8s_v4
INTERNAL LOAD BALANCER NAME: None
LOAD BALANCER RULE PORTS: []
NSG0: '[{"destinationPortRanges": ["22","443"],"sourceAddressPrefix": "208.85.208.0/22", "protocol": "Tcp"}]'
NSG1: '[{"destinationPortRanges": ["80","443"],"sourceAddressPrefix": "208.85.208.0/22", "protocol": "Tcp"}]'
NSG2: '[{"destinationPortRanges": ["22","443","4353"],"sourceAddressPrefix": "208.85.208.0/22", "protocol": "Tcp"},{"destinationPortRanges": ["1026"],"sourceAddressPrefix": "208.85.208.0/22", "protocol": "Udp"}]'
NSG3: '[]'
NSG4: '[]'
# make sure to provision enough public IPs to meet requirements
NUMBER PUBLIC EXT IP ADDRESSES: 8
NUMBER PUBLIC MGMT IP ADDRESSES: 1
NUMBER SUBNETS: 3
PROVISION PRIMARY PUBLIC IPS: 'Yes'
REGION: eastus2
RESOURCE GROUP: dd-bigip-<DEWPOINT JOB ID>
RUNTIME CONFIG: >-
  {\"extension_packages\":{\"install_operations\":[{\"extensionHash\":\"a359aa8aa14dc565146d4ccc413f169f1e8d02689559c5e4a652f91609a55fbb\",\"extensionType\":\"do\",\"extensionVersion\":\"1.17.0\"},{\"extensionHash\":\"df786fc755c5de6f3fcc47638caf3db4c071fcd9cf37855de78fd7e25e5117b4\",\"extensionType\":\"as3\",\"extensionVersion\":\"3.24.0\"},{\"extensionHash\":\"333e11a30ba88699ac14bc1e9546622540a5e889c415d5d53a8aeaf98f6f872e\",\"extensionType\":\"ts\",\"extensionVersion\":\"1.15.0\"}]},\"extension_services\":{\"service_operations\":[{\"extensionType\":\"do\",\"type\":\"inline\",\"value\":{\"Common\":{\"class\":\"Tenant\",\"dbvars\":{\"class\":\"DbVariables\",\"provision.extramb\":500,\"restjavad.useextramb\":true},\"myDns\":{\"class\":\"DNS\",\"nameServers\":[\"8.8.8.8\"]},\"myNtp\":{\"class\":\"NTP\",\"servers\":[\"0.pool.ntp.org\"],\"timezone\":\"UTC\"},\"myProvisioning\":{\"asm\":\"nominal\",\"class\":\"Provision\",\"ltm\":\"nominal\"},\"mySystem\":{\"autoPhonehome\":false,\"class\":\"System\",\"hostname\":\"{{HOST_NAME}}.local\"},\"internal\":{\"class\":\"VLAN\",\"tag\":4093,\"mtu\":1500,\"interfaces\":[{\"name\":\"1.2\",\"tagged\":false}]},\"internal-self\":{\"class\":\"SelfIp\",\"address\":\"{{{SELF_IP_INTERNAL}}}\",\"vlan\":\"internal\",\"allowService\":\"none\",\"trafficGroup\":\"traffic-group-local-only\"},\"external\":{\"class\":\"VLAN\",\"tag\":4094,\"mtu\":1500,\"interfaces\":[{\"name\":\"1.1\",\"tagged\":false}]},\"external-self\":{\"class\":\"SelfIp\",\"address\":\"{{{SELF_IP_EXTERNAL}}}\",\"vlan\":\"external\",\"allowService\":\"none\",\"trafficGroup\":\"traffic-group-local-only\"}},\"async\":true,\"class\":\"Device\",\"label\":\"myBIG-IPdeclarationfordeclarativeonboarding\",\"schemaVersion\":\"1.0.0\"}},{\"extensionType\":\"as3\",\"type\":\"inline\",\"value\":{\"action\":\"deploy\",\"class\":\"AS3\",\"declaration\":{\"Sample_http_01\":{\"A1\":{\"My_ASM_Policy\":{\"class\":\"WAF_Policy\",\"ignoreChanges\":false,\"enforcementMode\":\"blocking\",\"url\":\"https://cdn.f5.com/product/cloudsolutions/solution-scripts/Rapid_Deployment_Policy_13_1.xml\"},\"class\":\"Application\",\"serviceMain\":{\"class\":\"Service_HTTP\",\"policyWAF\":{\"use\":\"My_ASM_Policy\"},\"pool\":\"webPool\",\"virtualAddresses\":[\"0.0.0.0\"],\"virtualPort\":80},\"template\":\"http\",\"webPool\":{\"class\":\"Pool\",\"members\":[{\"serverAddresses\":[\"10.0.3.4\"],\"servicePort\":80}],\"monitors\":[\"http\"]}},\"class\":\"Tenant\"},\"class\":\"ADC\",\"label\":\"Sample1\",\"remark\":\"HTTPwithcustompersistence\",\"schemaVersion\":\"3.0.0\"},\"persist\":true}}]},\"post_onboard_enabled\":[],\"pre_onboard_enabled\":[],\"runtime_parameters\":[{\"name\":\"HOST_NAME\",\"type\":\"metadata\",\"metadataProvider\":{\"environment\":\"azure\",\"type\":\"compute\",\"field\":\"name\"}},{\"name\":\"SELF_IP_INTERNAL\",\"type\":\"metadata\",\"metadataProvider\":{\"environment\":\"azure\",\"type\":\"network\",\"field\":\"ipv4\",\"index\":2}},{\"name\":\"SELF_IP_EXTERNAL\",\"type\":\"metadata\",\"metadataProvider\":{\"environment\":\"azure\",\"type\":\"network\",\"field\":\"ipv4\",\"index\":1}}]}
SECRET VALUE: StrongPassword212+
# if left blank, dhcp will be used for the self IP
SELF IP MGMT: "10.0.0.4"
SELF IP NIC1: "10.0.1.4"
SELF IP NIC2: "10.0.2.4"
SERVICE IPS NIC1: '[{"publicIpId":"PIP0","privateIpAddress":"10.0.1.10"},{"publicIpId":"","privateIpAddress":"10.0.1.11"}]'
SERVICE IPS NIC2: '[{"privateIpAddress":"10.0.2.10"},{"privateIpAddress":"10.0.2.11"}]'
TEMPLATE URL: file://$PWD/examples/modules/bigip-standalone/bigip.json
USE AVAILABILITY ZONES: true
USE ROLE DEFINITION ID: 'No'
USER ASSIGN MANAGED IDENTITY: 'Yes'
USER ASSIGNED IDENT NAME: identity-<DEWPOINT JOB ID>
VM NAME: dd-vm-<DEWPOINT JOB ID>
